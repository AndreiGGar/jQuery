<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Clients jQuery</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
  <script src="https://code.jquery.com/jquery-3.6.1.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
</head>

<h2>XML Data Clients jQuery</h2><br/>

<div id="buttons"></div><br/>

<div id="person"></div>

<h1 style="color:crimson" id="messsage"></h1>

<script src="js/jquery-3.6.1.min.js"></script>

<script>

  $(document).ready(function () {
    $.get("xml/ClientesXML.xml", function (data) {
      $(data).find("CLIENTE").each(function () {
        var name = $(this).find("NOMBRE").first().text();
        var direction = $(this).find("DIRECCION").first().text();
        var email = $(this).find("EMAIL").first().text();
        var postalCode = $(this).find("CODIGOPOSTAL").first().text();
        var webPage = $(this).find("PAGINAWEB").first().text();
        var clientImage = $(this).find("IMAGENCLIENTE").first().text();

        var button = $("<button>", { "type": "button", "class": "btn-primary", "value": name, "text": name, "style": "margin-right:15px; margin-bottom: 15px;" });
        button.appendTo($("#buttons"));
        var html = "";
        $(button).click(function () {
          html = "<table>";
          html += "<thead><th>Name</th><th>Direction</th><th>Email</th><th>Postal Code</th><th>Website</th><th>Client Image</th></thead>";
          html += "<tbody><tr>"
          html += "<td>" + name;
          html += "<td>" + direction;
          html += "<td>" + email;
          html += "<td>" + postalCode;
          html += "<td>" + webPage;
          html += "<td>" + clientImage.attr("src", clientImage);
          html += "</tr></tbody>";
          html += "</table";
          $("#person").html(html);
          // $.get("xml/ClientesXML.xml", function (data) {
          //   var client = 
          // });
        })
      });
    });

    $("#load").click(function () {
      // console.log("Before service");
      // $.get("xml/departamentos.xml", function (data) {
      //   var loc = $("#idName").val();
      //   $(data).find("DEPT").each(function () {
      //     var html = "";
      //     var filter = "LOC:contains(" + loc + ")";
      //     if ($(data).find(filter).length == 0) {
      //       html = "There aren't any departments with that parameter."
      //     } else {
      //       $(data).find(filter).each(function() {
      //         html += $(this).text() + ";";
      //       });
      //     }
      //     $("#message").text(html);
      //   });
      // });
      $.get("xml/departamentos.xml", function (data) {
        console.log("Reading");
        var id = $("#idText").val();
        $(data).find("DEPT").each(function () {
          var html = "";
          var filter = "DEPT[DEPT_NO=" + id + "]";
          var outPrint = $(data).find(filter).first();
          var name = $(outPrint).find("DNOMBRE").first().text();
          var location = $(outPrint).find("LOC").first().text();
          html += "<tr>";
          var number = $(this).attr("DEPT_NO");
          html += "<td>" + outPrint.attr("DEPT_NO") + "</td>";
          html += "<td>" + name + "</td>";
          html += "<td>" + location + "</td>";
          $("#tableDepartments tbody").html(html);
        });
      })
      console.log("After service");
    });
  });
</script>

</body>

</html>

<style>
  table,
  table th,
  table td {
    border: 1px solid black;
  }
</style>